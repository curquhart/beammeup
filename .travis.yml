sudo: require
dist: trusty
before_install:
  - apt-get update -y
  - sudo apt-key adv --recv-keys --keyserver keyserver.ubuntu.com 1397BC53640DB551
  - sudo add-apt-repository --yes ppa:ubuntu-toolchain-r/test
  - sudo apt-get install -y g++-6 git
  - git clone https://github.com/google/googletest.git
  - mkdir -p googletest/googletest/build
  - pushd googletest/googletest/build
  - cmake -G"Unix Makefiles" ..
  - make
  - sudo cp -vr ../include/gtest /usr/include
  - sudo cp -v lib*.a /usr/lib
  - popd
  - rm -rf googletest/googletest/build
  - mkdir -p googletest/googlemock/build
  - pushd googletest/googlemock/build
  - cmake -G"Unix Makefiles" ..
  - make
  - sudo cp -vr ../include/gmock /usr/include
  - sudo cp -v lib*.a /usr/lib
  - popd
  - rm -rf googletest/googlemock/build
  - curl https://raw.githubusercontent.com/triglav/cmake-findgmock/master/FindGMock.cmake -o `echo /usr/share/cmake-*/Modules`/FindGMock.cmake

script:
  - cmake .
  - make tests