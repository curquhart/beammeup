sudo: require
dist: trusty
before_install:
  - git clone https://github.com/google/googletest.git
  - mkdir -p googletest/googletest/build
  - pushd googletest/googletest/build
  - cmake -G"Unix Makefiles" ..
  - make
  - sudo cp -vr ../include/gtest /usr/include
  - sudo cp -v lib*.a /usr/lib
  - popd
  - rm -rf googletest/googletest/build
  - mkdir -p googletest/googlemock/build
  - pushd googletest/googlemock/build
  - cmake -G"Unix Makefiles" ..
  - make
  - sudo cp -vr ../include/gmock /usr/include
  - sudo cp -v lib*.a /usr/lib
  - popd
  - rm -rf googletest/googlemock/build
  - sudo curl https://raw.githubusercontent.com/triglav/cmake-findgmock/master/FindGMock.cmake -o `echo /usr/share/cmake-*/Modules`/FindGMock.cmake

script:
  - cmake .
  - make tests